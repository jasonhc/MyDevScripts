# V1: Initial version
# V2:
# Show readable content (only some method call filtered by regexp) of .trace file generated by android profiler
# Usage: show-method-trace <trace file> <filter keyword>(extended regexp)
# Example: show-method-trace foo-bar.trace "\.(stv|letv)\."

if [ $# -lt 2 ]; then
    echo "Usage: show-method-trace <trace file> <filter keyword>(extended regexp)"
    exit 1
fi

TRACE_FILE=$1
KEYWORD=$2

~/android_sdk_mac/platform-tools/dmtracedump -ho $TRACE_FILE | egrep "$KEYWORD" | tr -s ' ' | cut -f 2,4 -d ' ' | sed -E -e 's/^ent/-->/' -e 's/^xit/<--/'
